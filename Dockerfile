FROM debian:buster-slim

ENV LC_CTYPE C.UTF-8
RUN adduser --disabled-password --gecos '' bob
RUN apt update && apt upgrade -y && apt install man manpages-dev less vim tmux gdb gcc-multilib g++-multilib binutils bsdmainutils p7zip unzip procps python3 python3-pip python3-setuptools git libssl-dev python3-dev libffi-dev build-essential ruby socat wget netcat python3-ipython strace -y --no-install-recommends && gem install one_gadget && python3 -m pip install --upgrade pip wheel

USER bob
ENV PATH "$PATH:/home/bob/.local/bin"
RUN python3 -m pip install keystone-engine capstone ropper pwntools checksec.py angr && wget -O /home/bob/.gdbinit-gef.py -q https://github.com/hugsy/gef/raw/master/gef.py && echo "source /home/bob/.gdbinit-gef.py" >> /home/bob/.gdbinit && echo "set history save on" >> /home/bob/.gdbinit
RUN echo 'set tabstop=4\nset shiftwidth=4\nset softtabstop=0\nset noexpandtab\nset smarttab\nset paste\nset incsearch\nset hlsearch\nset ignorecase\nset autoindent\nset wildmenu\nsyntax on' > /home/bob/.vimrc
RUN echo "set -g status-interval 1\nset -g status-justify left \nset -g status-left '#[fg=green] #H '##[default]'\nset-option -g status-right ''\nset -g status-fg white\nset -g status-bg default\nset -g status-attr default\nset-window-option -g window-status-fg white\nset-window-option -g window-status-bg default\nset-window-option -g window-status-attr dim\nset-window-option -g window-status-current-fg white\nset-window-option -g window-status-current-bg default\nset-window-option -g window-status-current-attr bright\nset -g message-fg white\nset -g message-bg black\nset -g message-attr bright\nset -g default-terminal 'screen-256color'" > /home/bob/.tmux.conf

WORKDIR /home/bob/pwn
